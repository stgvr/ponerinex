#:kivy 1.9.0
#:import kivy kivy
#:import Factory kivy.factory.Factory

<XCfgStatus>:
  orientation: 'vertical'
  canvas:
    Color: 
      rgba: 0,0,0,1
    Rectangle:
      size: self.size
      pos: self.pos
  # Program Title
  BoxLayout:
    orientation: 'horizontal'
    canvas:
      Color: 
        rgba: 0.95,0.95,0.95,1
      Rectangle:
        size: self.size
        pos: self.pos
    size_hint: None, None
    size: root.width, root.width/15 + root.width/20
    padding: root.width/30, root.width/40, root.width/30, root.width/40
    spacing: root.width/40
    RLabel:
      text_size: self.size
      size_hint: 1, None
      #padding_x: root.width/30
      height: root.width/15
      halign: 'left'
      valign: 'middle'
      color: 0,0,0,0.4
      font_size: root.width/22
      text: ' Exposure Setting'
    RLabel:
      text_size: self.size
      size_hint: 1, None
      #padding_x: root.width/30
      height: root.width/15
      halign: 'right'
      valign: 'middle'
      color: 0,0,0,1
      font_size: root.width/22
      text: 'Camera Status '
  # Camera Titles
  GridLayout:
    canvas:
      Color: 
        rgba: 1,1,1,0
      Rectangle:
        size: self.size
        pos: self.pos
    size_hint: None, None
    size: root.width, (root.width/30+root.width/37)+root.width/60
    spacing: 0, 0 #root.width/100
    #padding: root.width/15, root.width/30, 0, root.width/60 #, root.width/12, 0
    padding: root.width/15, root.width/30, root.width/15, 0 #, root.width/12, 0
    cols: 5
    DLabel:
      color: (1,1,1,1)
      size_hint: None, None
      size: (root.width-root.width/15*2)/7+root.width/30, root.width/30
      text: 'CAMERA' #%((root.width - root.width/15*5)/4)
    DLabel:
      color: (1,1,1,1)
      size_hint: None, None
      size: root.width/5+root.width/60, root.width/30
      text: 'BATTERY'
    DLabel:
      color: (1,1,1,1)
      size_hint: None, None
      size: (root.width-root.width/15*2)/7+root.width/45, root.width/30
      text: 'FORMAT'
    DLabel:
      color: (1,1,1,1)
      size_hint: None, None
      size: root.width/5+root.width/60, root.width/30
      text: 'MEMORY'
    DLabel:
      color: (1,1,1,1)
      size_hint: None, None
      size: (root.width-root.width/15*2)/7+root.width/60, root.width/30
      text: 'REBOOT'
  BoxLayout:
    orientation: 'vertical'
    size_hint: 1, None
    height: (root.width-root.width/15*2)/7*7
    padding: root.width/15, 0, root.width/15, 0
    CMemory:
      id: idxcamera1
      number: 1
      battery: root.battery[self.number-1]
      memory: root.memory[self.number-1]
      linked: root.linked[self.number-1]
      format: 0 #root.format[self.number-1]
      reboot: 0 #root.reboot[self.number-1]
    CMemory:
      id: idxcamera2
      number: 2
      battery: root.battery[self.number-1]
      memory: root.memory[self.number-1]
      linked: root.linked[self.number-1]
      format: 0 #root.format[self.number-1]
      reboot: 0 #root.reboot[self.number-1]
    CMemory:
      id: idxcamera3
      number: 3
      battery: root.battery[self.number-1]
      memory: root.memory[self.number-1]
      linked: root.linked[self.number-1]
      format: 0 #root.format[self.number-1]
      reboot: 0 #root.reboot[self.number-1]
    CMemory:
      id: idxcamera4
      number: 4
      battery: root.battery[self.number-1]
      memory: root.memory[self.number-1]
      linked: root.linked[self.number-1]
      format: 0 #root.format[self.number-1]
      reboot: 0 #root.reboot[self.number-1]
    CMemory:
      id: idxcamera5
      number: 5
      battery: root.battery[self.number-1]
      memory: root.memory[self.number-1]
      linked: root.linked[self.number-1]
      format: 0 #root.format[self.number-1]
      reboot: 0 #root.reboot[self.number-1]
    CMemory:
      id: idxcamera6
      number: 6
      battery: root.battery[self.number-1]
      memory: root.memory[self.number-1]
      linked: root.linked[self.number-1]
      format: 0 #root.format[self.number-1]
      reboot: 0 #root.reboot[self.number-1]
    CMemory:
      id: idxcamera7
      number: 7
      battery: root.battery[self.number-1]
      memory: root.memory[self.number-1]
      linked: root.linked[self.number-1]
      format: 0 #root.format[self.number-1]
      reboot: 0 #root.reboot[self.number-1]
  GridLayout:
    size_hint: 1,1
    padding: (root.width - root.width/10*3 - root.width/8*2)/2, self.height - root.width/10 * 2, (root.width - root.width/10*5)/2, root.width/15
    spacing: root.width/8, 0
    cols: 3
    Button:
      size_hint: None, None
      size: root.width/10, root.width/10
      background_normal: 'ximage/cancel_normal.png'
      background_down: 'ximage/cancel_down.png'
      always_release: False
      on_release: root.parent.parent.manager.XCfgStatusApply(root)
    Button:
      size_hint: None, None
      size: root.width/10, root.width/10
      background_normal: 'ximage/apply_normal.png'
      background_down: 'ximage/apply_down.png'
      always_release: False
      on_release:
        root.format[0] = idxcamera1.format
        root.format[1] = idxcamera2.format
        root.format[2] = idxcamera3.format
        root.format[3] = idxcamera4.format
        root.format[4] = idxcamera5.format
        root.format[5] = idxcamera6.format
        root.format[6] = idxcamera7.format
        root.reboot[0] = idxcamera1.reboot
        root.reboot[1] = idxcamera2.reboot
        root.reboot[2] = idxcamera3.reboot
        root.reboot[3] = idxcamera4.reboot
        root.reboot[4] = idxcamera5.reboot
        root.reboot[5] = idxcamera6.reboot
        root.reboot[6] = idxcamera7.reboot
        root.parent.parent.manager.XCfgStatusApply(root,True)
    Button:
      size_hint: None, None
      size: root.width/10, root.width/10
      background_normal: 'ximage/lscrn_normal.png'
      background_down: 'ximage/lscrn_down.png'
      always_release: False
      on_release: root.parent.parent.manager.XCfgExposureOpen(self,'right')
      