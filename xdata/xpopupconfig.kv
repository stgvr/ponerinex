#:kivy 1.9.0
#:import kivy kivy
#:import Factory kivy.factory.Factory 

<AdvancedPopup>:
  auto_dismiss: False
  #title: 'Camera Advanced Config'
  BoxLayout:
    orientation: 'vertical'
    spacing: 5
    
    Widget:
      size_hint: 1, None
      size: root.width, root.width/20
    
    # Scene Name & Counter
    GridLayout:
      size_hint: 1, None
      height: root.width/10 + root.width/50 #13
      padding: 0,0,0,root.width/50
      spacing: root.width/35
      cols: 3
      Label:
        text: 'Scene Name - No.%d : ' %root.sceneshot
        size_hint: 0.6, 1
        text_size: self.size
        font_size: root.width/25
        halign: 'right'
        valign: 'middle'
      TextInput:
        id: txtSceneName
        multiline: False
        text_size: self.size
        text: root.scenename
        font_size: root.width/22
        padding: root.width/50, root.width/55, 0, 0
        size_hint: 0.35, 1
        #halign: 'left'
        #valign: 'middle'
      Label:
        size_hint: 0.05, 1
        
    # Auto Rename
    GridLayout:
      size_hint: 1, None
      height: root.width/10 + root.width/50 #13
      padding: 0,0,0,root.width/50
      spacing: root.width/35
      cols: 3
      Label:
        text: 'Rename by Scene : '
        size_hint: 0.6, 1
        text_size: self.size
        font_size: root.width/25
        halign: 'right'
        valign: 'middle'
      Switch:
        id: optAutoRename
        active: root.autorename == 1
        size_hint: 0.3, 1
        #text_size: self.size
        #font_size: root.width/50
      Label:
        size_hint: 0.1, 1
    
    # Move Duplicated File
    GridLayout:
      size_hint: 1, None
      height: root.width/10 + root.width/50 #13
      padding: 0,0,0,root.width/50
      spacing: root.width/35
      cols: 3
      Label:
        text: 'Move Duplicated Files : '
        size_hint: 0.6, 1
        text_size: self.size
        font_size: root.width/25
        halign: 'right'
        valign: 'middle'
      Switch:
        id: optMoveDuplicated
        active: root.moveduplicated == 1
        size_hint: 0.3, 1
        #text_size: self.size
        #font_size: root.width/50
      Label:
        size_hint: 0.1, 1
    
    # Buzzer On Start
    GridLayout:
      size_hint: 1, None
      height: root.width/10 + root.width/50 #13
      padding: 0,0,0,root.width/50
      spacing: root.width/35
      cols: 3
      Label:
        text: 'Buzzer on Record Start : '
        size_hint: 0.6, 1
        text_size: self.size
        font_size: root.width/25
        halign: 'right'
        valign: 'middle'
      Switch:
        id: optBuzzerOnStart
        active: root.buzzeronstart == 1
        size_hint: 0.3, 1
        #text_size: self.size
        #font_size: root.width/50
      Label:
        size_hint: 0.1, 1
        
    # Buzzer On Stop
    GridLayout:
      size_hint: 1, None
      height: root.width/10 + root.width/50
      padding: 0,0,0,root.width/50
      spacing: root.width/35
      cols: 3
      Label:
        text: 'Buzzer on Record Stop : '
        size_hint: 0.6, 1
        text_size: self.size
        font_size: root.width/25
        halign: 'right'
        valign: 'middle'
      Switch:
        id: optBuzzerOnStop
        active: root.buzzeronstop == 1
        size_hint: 0.3, 1
        #text_size: self.size
        #font_size: root.width/50
      Label:
        size_hint: 0.1, 1
    
    # Volume Mute
    GridLayout:
      size_hint: 1, None
      height: root.width/10 + root.width/50
      padding: 0,0,0,root.width/50
      spacing: root.width/35
      cols: 3
      Label:
        text: 'Volume Mute on Connect : '
        size_hint: 0.6, 1
        text_size: self.size
        font_size: root.width/25
        halign: 'right'
        valign: 'middle'
      Switch:
        id: optBuzzerMute
        active: root.buzzermute == 1
        size_hint: 0.3, 1
        #text_size: self.size
        #font_size: root.width/50
      Label:
        size_hint: 0.1, 1
        
    # Mode Switch
    GridLayout:
      size_hint: 1, None
      height: root.width/10 + root.width/50
      padding: 0,0,0,root.width/50
      spacing: root.width/35
      cols: 3
      Label:
        text: 'Switch to Photo Mode : '
        size_hint: 0.6, 1
        text_size: self.size
        font_size: root.width/25
        halign: 'right'
        valign: 'middle'
      Switch:
        id: optPhotoMode
        active: root.photomode == 1
        size_hint: 0.3, 1
      Label:
        size_hint: 0.1, 1
        
    AnchorLayout:
      anchor_x: 'center'
      anchor_y: 'bottom'
      orientation: 'horizontal'
      size_hint: 1, 1
      GridLayout:
        cols: 2
        size_hint: None, None
        size: root.width*0.8, root.width*0.15+root.width/20
        padding: 0,0,0,root.width/20
        spacing: root.width/20
        # Apply Button
        Button:
          text: 'Apply'
          size_hint: 1, 1
          always_release: False
          on_release:
            root.apply = True
            root.scenename = txtSceneName.text
            root.autorename = 1 if optAutoRename.active else 0
            root.moveduplicated = 1 if optMoveDuplicated.active else 0
            root.buzzeronstart = 1 if optBuzzerOnStart.active else 0
            root.buzzeronstop = 1 if optBuzzerOnStop.active else 0
            root.buzzermute = 1 if optBuzzerMute.active else 0
            root.photomode = 1 if optPhotoMode.active else 0
            root.dismiss()
        # Cancel Button
        Button:
          text: 'Cancel'
          size_hint: 1, 1
          always_release: False
          on_release:
            root.apply = False
            root.dismiss()

<ConfigPopup>:
  auto_dismiss: False
  #title: 'Camera Connection Config'
  BoxLayout:
    orientation: 'vertical'
    spacing: 5
    
    Widget:
      size_hint: 1, None
      size: root.width, root.width/20
    
    # Camera Enabled
    GridLayout:
      size_hint: 1, None
      height: root.width/13 + root.width/50
      padding: 0,0,0,root.width/50
      spacing: root.width/35
      cols: 3
      Label:
        text: 'Camera Enabled : '
        size_hint: 0.4, 1
        text_size: self.size
        font_size: root.width/25
        halign: 'right'
        valign: 'middle'
      Switch:
        id: optEnabled
        active: root.cfg["enabled"] == 1
        size_hint: 0.25, 1
        #text_size: self.size
        #font_size: root.width/50
      Label:
        size_hint: 0.35, 1
    
    #Camera No.
    GridLayout:
      #disabled: (False if optWifiMode.active else True) if optEnabled.active else True
      size_hint: 1, None
      height: root.width/13 + root.width/50
      padding: 0,0,0,root.width/50
      spacing: root.width/35
      cols: 3
      Label:
        text: 'Camera No. : '
        size_hint: 0.4, 1
        text_size: self.size
        font_size: root.width/25
        halign: 'right'
        valign: 'middle'
      Label: #TextInput:
        id: txtCameraNo
        text_size: self.size
        text: root.cfg["camera"]
        size_hint: 0.4, 1
        font_size: root.width/25
        halign: 'left'
        valign: 'middle'
        padding_x: root.width/60
      Label:
        size_hint: 0.2, 1
    
    #Camera IP Address
    GridLayout:
      #disabled: (True if optWifiMode.active else False) if optEnabled.active else True
      size_hint: 1, None
      height: root.width/13 + root.width/50
      padding: 0,0,0,root.width/50
      spacing: root.width/35
      cols: 3
      Label:
        text: 'Camera IP : '
        size_hint: 0.4, 1
        text_size: self.size
        font_size: root.width/25
        halign: 'right'
        valign: 'middle'
      TextInput:
        id: txtCameraIP
        multiline: False
        text: root.cfg["ip"]
        size_hint: 0.4, 1
        font_size: root.width/25
        padding: root.width/60, root.width/70, 0, 0
      Label:
        size_hint: 0.2, 1
    
    #Camera Name
    GridLayout:
      #disabled: (False if optWifiMode.active else True) if optEnabled.active else True
      size_hint: 1, None
      height: root.width/13 + root.width/50
      padding: 0,0,0,root.width/50
      spacing: root.width/35
      cols: 3
      Label:
        text: 'Camera Name : ' 
        size_hint: 0.4, 1
        text_size: self.size
        font_size: root.width/25
        halign: 'right'
        valign: 'middle'
      TextInput:
        id: txtCameraName
        multiline: False
        text: root.cfg["name"]
        size_hint: 0.4, 1
        font_size: root.width/25
        padding: root.width/60, root.width/70, 0, 0
      Label:
        size_hint: 0.2, 1
    
    #Preview Enable
    GridLayout:
      size_hint: 1, None
      height: root.width/13 + root.width/50
      padding: 0,0,0,root.width/50
      spacing: root.width/35
      cols: 3
      Label:
        text: 'Preview : '
        size_hint: 0.4, 1
        text_size: self.size
        font_size: root.width/25
        halign: 'right'
        valign: 'middle'
      Switch:
        id: optPreview
        active: root.cfg["preview"] == 1
        size_hint: 0.25, 1
        #text_size: self.size
        #font_size: root.width/50
      Label:
        size_hint: 0.35, 1
    
    AnchorLayout:
      anchor_x: 'center'
      anchor_y: 'bottom'
      orientation: 'horizontal'
      size_hint: 1, 1
      GridLayout:
        cols: 2
        size_hint: None, None
        size: root.width*0.8, root.width*0.15+root.width/20
        padding: 0,0,0,root.width/20
        spacing: root.width/20
        # Apply Button
        Button:
          text: 'Apply'
          size_hint: 1, 1
          always_release: False
          on_release:
            root.apply = True
            root.cfg["camera"] = txtCameraNo.text
            root.cfg["ip"] = txtCameraIP.text
            root.cfg["name"] = txtCameraName.text
            root.cfg["enabled"] = 1 if optEnabled.active else 0
            root.cfg["preview"] = 1 if optPreview.active else 0
            root.dismiss()
        # Cancel Button
        Button:
          text: 'Cancel'
          size_hint: 1, 1
          always_release: False
          on_release:
            root.apply = False
            root.dismiss()
            
<CameraSettingPopup>:
  auto_dismiss: False
  #title: 'Camera Settings'
  BoxLayout:
    orientation: 'vertical'
    spacing: root.width/30 #5
    
    Widget:
      size_hint: 1, None
      size: root.width, root.width/20
    
    #Camera AE Info
    GridLayout:
      #disabled: (False if optWifiMode.active else True) if optEnabled.active else True
      size_hint: 1, None
      height: root.width/10 + root.width/50 #13
      padding: 0,0,0,root.width/50
      spacing: root.width/35
      cols: 3
      Label:
        text: 'AE Info : '
        size_hint: 0.4, 1
        text_size: self.size
        font_size: root.width/25
        halign: 'right'
        valign: 'middle'
      Label: #TextInput:
        id: txtCameraNo
        text_size: self.size
        text: root.asid
        size_hint: 0.4, 1
        font_size: root.width/25
        halign: 'left'
        valign: 'middle'
        padding_x: root.width/60
      Label:
        size_hint: 0.2, 1
    
    #Sync AE Info
    GridLayout:
      size_hint: 1, None
      height: root.width/10 + root.width/50 #13
      padding: 0,0,0,root.width/50
      spacing: root.width/35
      cols: 3
      Label:
        text: 'Sync AE to All Cameras : '
        size_hint: 0.6, 1
        text_size: self.size
        font_size: root.width/25
        halign: 'right'
        valign: 'middle'
      Switch:
        id: optSyncAll
        active: 0
        size_hint: 0.25, 1
        #text_size: self.size
        #font_size: root.width/50
      Label:
        size_hint: 0.15, 1
        
    # Format SD Card
    GridLayout:
      size_hint: 1, None
      height: root.width/10 + root.width/50 #13
      padding: 0,0,0,root.width/50
      spacing: root.width/35
      cols: 3
      Label:
        text: 'Format SD Card : '
        size_hint: 0.6, 1
        text_size: self.size
        font_size: root.width/25
        halign: 'right'
        valign: 'middle'
      Switch:
        id: optFormat
        active: 0
        size_hint: 0.25, 1
        #text_size: self.size
        #font_size: root.width/50
      Label:
        size_hint: 0.15, 1
    # Reboot Camera
    GridLayout:
      size_hint: 1, None
      height: root.width/10 + root.width/50 #13
      padding: 0,0,0,root.width/50
      spacing: root.width/35
      cols: 3
      Label:
        text: 'Reboot Camera : '
        size_hint: 0.6, 1
        text_size: self.size
        font_size: root.width/25
        halign: 'right'
        valign: 'middle'
      Switch:
        id: optReboot
        active: 0
        size_hint: 0.25, 1
        #text_size: self.size
        #font_size: root.width/50
      Label:
        size_hint: 0.15, 1
    
    # Restore Factory
    GridLayout:
      size_hint: 1, None
      height: root.width/10 + root.width/50 #13
      padding: 0,0,0,root.width/50
      spacing: root.width/35
      cols: 3
      Label:
        text: 'Restore Factory Settings : '
        size_hint: 0.6, 1
        text_size: self.size
        font_size: root.width/25
        halign: 'right'
        valign: 'middle'
      Switch:
        id: optRestore
        active: 0
        size_hint: 0.25, 1
        #text_size: self.size
        #font_size: root.width/50
      Label:
        size_hint: 0.15, 1
        
    AnchorLayout:
      anchor_x: 'center'
      anchor_y: 'bottom'
      orientation: 'horizontal'
      size_hint: 1, 1
      GridLayout:
        cols: 2
        size_hint: None, None
        size: root.width*0.8, root.width*0.15+root.width/20
        padding: 0,0,0,root.width/20
        spacing: root.width/20
        # Apply Button
        Button:
          text: 'Apply'
          size_hint: 1, 1
          always_release: False
          on_release:
            root.apply = True
            root.format = 1 if optFormat.active else 0
            root.reboot = 1 if optReboot.active else 0
            root.restore = 1 if optRestore.active else 0
            root.syncall = 1 if optSyncAll.active else 0
            root.dismiss()
        # Cancel Button
        Button:
          text: 'Cancel'
          size_hint: 1, 1
          always_release: False
          on_release:
            root.apply = False
            root.dismiss()
            
<ManualExposurePopup>:
  auto_dismiss: False
  #title: 'Camera Settings'
  BoxLayout:
    orientation: 'vertical'
    spacing: root.width/25 #5
    
    Widget:
      size_hint: 1, None
      size: root.width, root.width/20
    
    # Shutter Speed
    GridLayout:
      size_hint: 1, None
      height: root.width/10 + root.width/50 #13
      padding: 0,0,0,root.width/50
      spacing: root.width/35
      cols: 3
      Label:
        text: 'Shutter Speed : '
        size_hint: 0.45, 1
        text_size: self.size
        font_size: root.width/25
        halign: 'right'
        valign: 'middle'
      Spinner:
        id: optShutter
        active: 0
        size_hint: 0.4, 1
        text: root.shutter
        values: ("1 / 30s", "1 / 60s", "1 / 100s")
        #text_size: self.size
        #font_size: root.width/50
      Label:
        size_hint: 0.15, 1
        
    # ISO
    GridLayout:
      size_hint: 1, None
      height: root.width/10 + root.width/50 #13
      padding: 0,0,0,root.width/50
      spacing: root.width/35
      cols: 3
      Label:
        text: 'ISO Sensitive : '
        size_hint: 0.45, 1
        text_size: self.size
        font_size: root.width/25
        halign: 'right'
        valign: 'middle'
      Spinner:
        id: optISO
        active: 0
        size_hint: 0.4, 1
        text: root.iso
        values: ("ISO 100", "ISO 200", "ISO 400", "ISO 800", "ISO 1600", "ISO 3200")
        #text_size: self.size
        #font_size: root.width/50
      Label:
        size_hint: 0.15, 1
    
    AnchorLayout:
      anchor_x: 'center'
      anchor_y: 'bottom'
      orientation: 'horizontal'
      size_hint: 1, 1
      GridLayout:
        cols: 2
        size_hint: None, None
        size: root.width*0.8, root.width*0.15+root.width/20
        padding: 0,0,0,root.width/20
        spacing: root.width/20
        # Apply Button
        Button:
          text: 'Apply'
          size_hint: 1, 1
          always_release: False
          on_release:
            root.apply = True
            root.shutter = optShutter.text
            root.iso = optISO.text
            root.dismiss()
        # Cancel Button
        Button:
          text: 'Cancel'
          size_hint: 1, 1
          always_release: False
          on_release:
            root.apply = False
            root.dismiss()
            